(()=>{(function(){"use strict";var f=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("k-inside",[e("k-view",{staticClass:"k-logbook-view"},[e("k-header",[t._v(" "+t._s(t.title)+" ")]),t.logfiles.length>0?e("section",[e("header",{staticClass:"k-system-view-section-header"},[e("k-headline",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedLogfile,expression:"selectedLogfile"}],on:{change:[function(i){var s=Array.prototype.filter.call(i.target.options,function(r){return r.selected}).map(function(r){var g="_value"in r?r._value:r.value;return g});t.selectedLogfile=i.target.multiple?s:s[0]},function(i){return t.fetchLog(i)}]}},t._l(t.logfiles,function(i){return e("option",{key:i},[t._v(" "+t._s(i)+" ")])}),0)])],1)]):t._e(),this.logLinesCount>0?e("section",{staticClass:"k-system-view-section"},[e("div",{staticClass:"k-system-info-box k-logbook-pane"},[t.isKirbyLogPluginLog?[e("table",[e("thead",[e("tr",[e("th",{staticClass:"column-timestamp"},[t._v("Timestamp")]),e("th",{staticClass:"column-level"},[t._v("Level")]),e("th",[t._v("Entry")])])]),e("tbody",t._l(t.logLinesSet,function(i){return e("tr",{key:i},[e("td",{staticClass:"column-timestamp"},[t._v(t._s(i.timestamp))]),e("td",{staticClass:"column-level"},[t._v(t._s(i.type))]),e("td",[t._v(t._s(i.content))])])}),0)])]:[e("ol",t._l(t.logLinesSet,function(i){return e("li",{key:i},[t._v(" "+t._s(i[1])+" ")])}),0)]],2),e("div",{staticClass:"k-logbook-pagination"},[e("div",[t._v(" Showing "+t._s(t.paginationPage+1)+"\xA0to\xA0"+t._s(t.paginationPageMax)+" from "+t._s(t.logLinesCount)+" log entries "),!t.hasNextPaginationSet&&t.logLinesCount>=t.maxLogLines?e("div",[t._v(" \u26A0\uFE0F Maximum log entries displayed. Increase 'maxLogLines' in LogBook plugin settings, or check log on server for more entries. ")]):t._e()]),e("nav",{staticClass:"k-button-group k-prev-next"},[e("span",{staticClass:"k-button",attrs:{"data-disabled":!t.hasPreviousPaginationSet}},[t.hasPreviousPaginationSet?e("button",{staticClass:"k-button-icon k-icon k-icon-angle-left",attrs:{"aria-label":"Previous"},on:{click:function(i){return t.paginationPrevious(i)}}},[e("svg",{attrs:{viewBox:"0 0 16 16"}},[e("use",{attrs:{"xlink:href":"#icon-angle-left"}})])]):e("span",{staticClass:"k-button-icon k-icon k-icon-angle-left"},[e("svg",{attrs:{viewBox:"0 0 16 16"}},[e("use",{attrs:{"xlink:href":"#icon-angle-left"}})])])]),e("span",{staticClass:"k-button",attrs:{"data-disabled":!t.hasNextPaginationSet}},[t.hasNextPaginationSet?e("button",{staticClass:"k-button-icon k-icon k-icon-angle-right",attrs:{"aria-label":"Next"},on:{click:function(i){return t.paginationNext(i)}}},[e("svg",{attrs:{viewBox:"0 0 16 16"}},[e("use",{attrs:{"xlink:href":"#icon-angle-right"}})])]):e("span",{staticClass:"k-button-icon k-icon k-icon-angle-right"},[e("svg",{attrs:{viewBox:"0 0 16 16"}},[e("use",{attrs:{"xlink:href":"#icon-angle-right"}})])])])])])]):t._e(),this.logLinesCount==0&&t.logfiles.length!=0?e("section",{staticClass:"k-system-view-section"},[e("div",{staticClass:"k-system-info-box k-logbook-pane"},[e("p",[t._v("Empty logfile")])])]):t._e(),t.logfiles.length==0?e("section",{staticClass:"k-system-view-section"},[e("div",{staticClass:"k-system-info-box k-logbook-pane"},[e("p",[t._v("No logfiles found")])])]):t._e()],1)],1)},v=[],y="";function p(t,o,e,i,s,r,g,L){var n=typeof t=="function"?t.options:t;o&&(n.render=o,n.staticRenderFns=e,n._compiled=!0),i&&(n.functional=!0),r&&(n._scopeId="data-v-"+r);var l;if(g?(l=function(a){a=a||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!a&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(a=__VUE_SSR_CONTEXT__),s&&s.call(this,a),a&&a._registeredComponents&&a._registeredComponents.add(g)},n._ssrRegister=l):s&&(l=L?function(){s.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(n.functional){n._injectStyles=l;var b=n.render;n.render=function(C,h){return l.call(h),b(C,h)}}else{var u=n.beforeCreate;n.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:n}}const _={name:"LogBookArea",props:["title","logfiles","selectedLogfile","logData","maxLogLines","hasKirbyLogPlugin","paginationPage","paginationSize"],methods:{fetchLog:function(t){fetch("/kirbylogbook/"+t.target.value).then(o=>o.json()).then(o=>{this.paginationPage=0,this.logData=o})},parseLogLines:function(){var t;return Array.isArray(this.logData)?t=this.logData:t=Object.entries(this.logData),t},paginationNext:function(t){this.paginationPage+=this.paginationSize},paginationPrevious:function(t){this.paginationPage-=this.paginationSize}},computed:{logLines:function(){return this.parseLogLines()},isKirbyLogPluginLog:function(){if(this.logData[0]==null)return!1;var t=["timestamp","type","content"];return this.hasKirbyLogPlugin&&JSON.stringify(Object.keys(this.logData[0]))==JSON.stringify(t)},logLinesCount:function(){return this.logLines.length},logLinesSet:function(){return this.logLines.slice(this.paginationPage,this.paginationPage+this.paginationSize)},paginationPageMax:function(){return this.hasNextPaginationSet?this.paginationPage+this.paginationSize:this.logLinesCount},hasPagination:function(){if(this.logLinesCount>this.paginationSize)return!0},hasNextPaginationSet:function(){return this.paginationPage+this.paginationSize<this.logLinesCount},hasPreviousPaginationSet:function(){return this.paginationPage-this.paginationSize>=0}},created(){this.paginationPage=0}},c={};var d=p(_,f,v,!1,k,"6f8d05d0",null,null);function k(t){for(let o in c)this[o]=c[o]}var m=function(){return d.exports}();window.panel.plugin("bvdputte/logbook",{components:{"k-logbook-area":m}})})();})();
